<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition template="/layout/layout.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	 
	 <f:metadata>
		<f:viewAction action="#{usuarioMB.onPageLoad_ListarUsuarios()}" />
	</f:metadata>
	
	<style type="text/css">
	    .value {
	        font-weight: bold;
	    }
	     
	    .ui-datatable {
	        margin-bottom: 25px
	    }
	     
	    .ui-datatable .ui-datatable-footer {
	        text-align:left;
	    }
	     
	    .ui-datalist ul {
	        padding: 0 0 0 10px;
	        margin: 5px 0;
	    }
	     
	    .ui-datatable .ui-button-icon-only .ui-button-text {
	        padding: 0;
	        line-height: 1.2;
	    }
	</style>
 
 
	<ui:define name="title">
		<c:set var="title" value="Lista de usuarios" scope="request" />		
	</ui:define>

	<ui:define name="content">
	 	 
		<br/>
		<h:messages id="messages" showDetail="true" globalOnly="true" closable="true" style="color: blue" />
		<br/>
	
		<h:form id="botonera">		
			<p:commandButton value="Cargar activos" action="#{usuarioMB.actualizarListaUsuarios(true)}" update=":frmPpal"/>
			&#160;&#160;
			<p:commandButton value="Cargar inactivos" action="#{usuarioMB.actualizarListaUsuarios(false)}" update=":frmPpal"/>
			<!--&#160;&#160;
			<p:commandButton value="Limpiar" action="#{usuarioMB.inicializarListaUsuarios()}" update=":frmPpal"/>
			  -->
		</h:form>
		 
	  	<p:separator style="width:auto; height:3px; background-color:blue; border-color:blue"/>
		<br></br>
		 
		 
		<h:form id="frmPpal">		    
		    <p:growl id="msgFrmPpal" showDetail="true" showSummary="false"/>
		    
		    <p:dataTable id="tabla" 
		    			 var="fila" 
		    			 value="#{usuarioMB.listaUsuarios}" 
		    			 emptyMessage="Sin registros" 
		    			 rendered="#{not empty usuarioMB.listaUsuarios}"		    			 	    			    			 		    			 
		    			 >
		    	
		        <f:facet name="header">		           
		            <p:outputLabel value="#{usuarioMB.encListados()}"/>
		        </f:facet>
		    
		        <p:column headerText="Nombre" filterBy="#{fila.nombre}" filterMatchMode="contains">		        	
		        	<h:outputText for="txtNom" value="#{fila.nombre}" />
		        </p:column>
		        
		        <p:column headerText="Apellido" filterBy="#{fila.apellido}" filterMatchMode="contains">		        	
		        	<h:outputText for="txtApe" value="#{fila.apellido}" />
		        </p:column>
		        
		        <p:column headerText="Rol" filterBy="#{fila.nombreRol}" filterMatchMode="contains">		        		        	
		        	<h:outputText for="rol" value="#{fila.nombreRol}" />
		        </p:column>
		        
		        <p:column headerText="e-mail" filterBy="#{fila.email}" filterMatchMode="contains">		        	
		        	<h:outputText for="txtEmail" value="#{fila.email}" />
		        </p:column>
		        		        
		        <p:column headerText="Usuario" filterBy="#{fila.nombreUsuario}" filterMatchMode="contains">		        	
		        	<h:outputText for="txtNomUsu" value="#{fila.nombreUsuario}" />
		        </p:column>		        
		     </p:dataTable>		     
	    </h:form>
	
	</ui:define>	
	
</ui:composition>
